<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>WindowVert – Internal Scheduler</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Bootstrap CSS (CDN) -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />

    <link rel="stylesheet" href="app.css" type="text/css">
  </head>

  <body class="bg-light">
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark mb-3">
      <div class="container-fluid">
        <span class="navbar-brand fw-bold">WindowVert</span>
        <span class="navbar-text text-white-50">
          Internal Booking & Team Scheduler
        </span>
      </div>
    </nav>

    <main class="container mb-5">
      <!-- Tabs -->
      <ul class="nav nav-tabs mb-3" id="mainTabs" role="tablist">
        <li class="nav-item" role="presentation">
          <button
            class="nav-link active"
            id="schedule-tab"
            data-bs-toggle="tab"
            data-bs-target="#schedule-pane"
            type="button"
            role="tab"
          >
            Schedule
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button
            class="nav-link"
            id="teams-tab"
            data-bs-toggle="tab"
            data-bs-target="#teams-pane"
            type="button"
            role="tab"
          >
            Team Setup
          </button>
        </li>
      </ul>

      <div class="tab-content">
        <!-- Schedule tab -->
        <div
        class="tab-pane fade show active"
        id="schedule-pane"
        role="tabpanel"
        aria-labelledby="schedule-tab"
        >

        <!-- Sticky schedule toolbar (view toggle + nav) -->
        <div class="schedule-toolbar sticky-top bg-light pb-2">
        <!-- View toggle: Day / Week -->
        <div class="d-flex justify-content-between align-items-center mb-2">
            <div class="btn-group btn-group-sm" role="group">
            <button
                type="button"
                class="btn btn-outline-secondary active"
                id="btnViewDay"
            >
                Day view
            </button>
            <button
                type="button"
                class="btn btn-outline-secondary"
                id="btnViewWeek"
            >
                Week view
            </button>
            </div>

            <div class="schedule-week-label" id="scheduleLabel"></div>

            <div class="schedule-legend text-muted d-none d-sm-block">
            <!-- (legend content as before) -->
            <span>
                <span class="legend-color booking-service-pro"></span>
                Measure / Quote
            </span>
            <span>
                <span class="legend-color booking-service-major"></span>
                Install
            </span>
            <span>
                <span class="legend-color booking-service-expert"></span>
                Service
            </span>
            <span>
                <span class="legend-color booking-service-min"></span>
                Other
            </span>
            </div>
        </div>

        <!-- Day/week navigation -->
        <div class="mb-2">
            <div class="btn-group btn-group-sm" role="group" aria-label="Day/week nav">
            <button
                type="button"
                class="btn btn-outline-secondary"
                id="btnPrevPeriod"
            >
                &laquo; Prev
            </button>
            <button
                type="button"
                class="btn btn-outline-secondary"
                id="btnTodayPeriod"
            >
                Today
            </button>
            <button
                type="button"
                class="btn btn-outline-secondary"
                id="btnNextPeriod"
            >
                Next &raquo;
            </button>
            </div>
        </div>
        </div>


        <div class="card">
            <div class="card-body">
            <!-- We render into this container for BOTH day/week modes -->
            <div
                class="schedule-grid-container"
                id="scheduleGridContainer"
            >
                <div id="scheduleLoading" class="text-muted small">
                Loading schedule…
                </div>
            </div>
            </div>
        </div>

        <p class="text-muted small mt-2">
            Click an empty slot to create a booking. Click an existing booking to edit
            or move it. (Drag & resize to come back once we hook your DnD logic in.)
        </p>
    </div>

        <!-- Teams tab -->
        <div
          class="tab-pane fade"
          id="teams-pane"
          role="tabpanel"
          aria-labelledby="teams-tab"
        >
          <div class="row g-3">
            <div class="col-md-4">
              <div class="card">
                <div class="card-header">
                  <div class="d-flex justify-content-between align-items-center">
                    <span class="fw-semibold">Teams</span>
                    <button
                      id="btn-new-team"
                      class="btn btn-sm btn-primary"
                      type="button"
                    >
                      + New
                    </button>
                  </div>
                </div>
                <div class="card-body">
                  <div class="mb-3">
                    <label for="team-select" class="form-label"
                      >Select team</label
                    >
                    <select id="team-select" class="form-select form-select-sm">
                      <!-- populated by JS -->
                    </select>
                  </div>
                  <div class="mb-3">
                    <label for="team-name-input" class="form-label"
                      >Team name</label
                    >
                    <input
                      id="team-name-input"
                      type="text"
                      class="form-control form-control-sm"
                      placeholder="e.g. Install Team A"
                    />
                  </div>
                  <div class="mb-3">
                        <label for="team-lead-select" class="form-label">Team lead</label>
                        <select
                            id="team-lead-select"
                            class="form-select form-select-sm"
                        ></select>
                        </div>

                        <div class="d-flex gap-2">
                        <button
                            id="btn-delete-team"
                            class="btn btn-sm btn-outline-danger flex-fill"
                            type="button"
                        >
                            Delete team
                        </button>
                        <button
                            id="btn-save-team"
                            class="btn btn-sm btn-success flex-fill"
                            type="button"
                        >
                            Save team
                        </button>
                    </div>
                </div>
              </div>
            </div>

            <div class="col-md-8">
              <div class="row g-3">
                <div class="col-md-6">
                  <div class="card h-100">
                    <div class="card-header">
                      <span class="fw-semibold">Available employees</span>
                      <div class="small text-muted">
                        Click to add to selected team
                      </div>
                    </div>
                    <div class="card-body team-column">
                      <ul
                        id="available-employees-list"
                        class="list-group list-group-flush"
                      >
                        <!-- populated by JS -->
                      </ul>
                    </div>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="card h-100">
                    <div class="card-header">
                      <span class="fw-semibold">Team members</span>
                      <div class="small text-muted">
                        Click to remove from selected team
                      </div>
                    </div>
                    <div class="card-body team-column">
                      <ul
                        id="team-members-list"
                        class="list-group list-group-flush"
                      >
                        <!-- populated by JS -->
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
              <p class="mt-2 small text-muted">
                Note: this is a simple click-to-move interface. We can upgrade
                it to drag-and-drop later.
              </p>
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- Booking Modal -->
    <div
      class="modal fade"
      id="bookingModal"
      tabindex="-1"
      aria-labelledby="bookingModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <form class="modal-content" id="booking-form">
          <div class="modal-header">
            <h5 class="modal-title" id="bookingModalLabel">New booking</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>

          <div class="modal-body">
            <input type="hidden" id="booking-id" />

            <div class="mb-3">
              <label for="booking-date" class="form-label">Date</label>
              <input
                type="date"
                class="form-control"
                id="booking-date"
                required
              />
            </div>

            <div class="mb-3">
              <label for="booking-team" class="form-label">Team</label>
              <select
                id="booking-team"
                class="form-select"
                required
              ></select>
            </div>

            <div class="mb-3">
              <label for="booking-start" class="form-label">Start time</label>
              <select
                id="booking-start"
                class="form-select"
                required
              ></select>
            </div>

            <div class="mb-3">
              <label for="booking-duration" class="form-label"
                >Duration (hours)</label
              >
              <input
                type="number"
                step="0.5"
                min="0.5"
                class="form-control"
                id="booking-duration"
                value="1.5"
                required
              />
            </div>

            <div class="mb-3">
                <label for="booking-jobType" class="form-label">Job type</label>
                <select id="booking-jobType" class="form-select" required>
                    <option value="measure">Measure / Quote</option>
                    <option value="install">Install</option>
                    <option value="service">Service</option>
                    <option value="other">Other</option>
                </select>
            </div>

            <div class="mb-3">
              <label for="booking-customer" class="form-label"
                >Customer name</label
              >
              <input
                type="text"
                class="form-control"
                id="booking-customer"
              />
            </div>

            <div class="mb-3">
              <label for="booking-notes" class="form-label">Notes</label>
              <textarea
                class="form-control"
                id="booking-notes"
                rows="2"
              ></textarea>
            </div>

            <div class="alert alert-warning d-none" id="booking-error"></div>
          </div>

          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-outline-danger me-auto d-none"
              id="btn-delete-booking"
            >
              Delete
            </button>
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Cancel
            </button>
            <button type="submit" class="btn btn-primary">Save booking</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Bootstrap JS (for modal & tabs) -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>

    <!-- Our app (ES module) -->
    <script type="module" src="./app.js"></script>
  </body>
</html>